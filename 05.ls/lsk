#!/usr/bin/env ruby
# frozen_string_literal: true

NUMBER_OF_COLUMNS = 3

indexes = []
1.upto(NUMBER_OF_COLUMNS - 1) { |x| indexes << x }

files = Dir.glob("[^\.]*")

file_lengths = []
files.each { |file| file_lengths << file.length }

quotient, remainder = files.length.divmod(NUMBER_OF_COLUMNS)
files_transposed =
  if remainder != 0
    (NUMBER_OF_COLUMNS - remainder).times do
      files << nil
    end
    files.each_slice(quotient + 1).to_a.transpose
  else
    files.each_slice(quotient).to_a.transpose
  end

max_characters_of_filename = file_lengths.max
files_transposed.each do |column|
  columns = [column[0].to_s.ljust(max_characters_of_filename)]
  indexes.each do |i|
    columns << column[i].to_s.ljust(max_characters_of_filename)
  end
  puts columns.join(' ' * 4)
end
